实现高效数据流转

高效节点发现


kademlia DHT协议

更合理的实现：“非对称密钥交换 + 对称加密”
实际通信中，更优的方案是结合非对称加密和对称加密，流程如下（类似 TLS/Noise 的简化版）：
1. 初始化阶段（密钥协商）
   A 和 B 各自生成临时非对称密钥对（用于本次会话，避免长期密钥泄露风险）。
   A 已知 B 的长期公钥（用于身份验证），A 将自己的临时公钥用 B 的长期公钥加密后发给 B（确保只有 B 能解密）。
   B 用自己的长期私钥解密，得到 A 的临时公钥；同时 B 生成自己的临时公钥，用 A 的临时公钥（非对称加密）发给 A。
2. 生成会话密钥（对称密钥）
   A 和 B 分别用自己的临时私钥 + 对方的临时公钥，通过ECDH（椭圆曲线密钥交换） 计算出相同的共享密钥。
   用 HKDF 等密钥派生算法，从共享密钥中生成会话密钥（对称密钥，如 AES 密钥）。
3. 数据传输阶段
   后续所有消息都用会话密钥进行对称加密（如 AES-GCM、ChaCha20-Poly1305），同时附加消息认证码（MAC）防止篡改。
   双向通信只需一套会话密钥，性能极高。